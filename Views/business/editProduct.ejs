<div class="container">
  <h3 class="center-align">Edit Product</h3>
  <form action="/business/products/edit/<%= product.product_id %>" method="POST" enctype="multipart/form-data" class="col s12">
    <div class="row">
      <div class="input-field col s12">
        <label for="categoryId" class="active">Category</label>
        <select name="categoryId" id="categoryId" class="browser-default" required>
          <option value="" disabled selected>Select a category</option>
          <% categories.forEach(category => { %>
            <option value="<%= category.category_id %>" <%= category.category_id === (product && product.category_id) ? 'selected' : '' %>>
              <%= category.category_name %>
            </option>
          <% }) %>
        </select>
      </div>
    </div>
    
    <div class="row">
      <div class="input-field col s12">
        <input type="text" id="productName" name="productName" value="<%= product.product_name %>" required>
        <label class="active" for="productName">Product Name</label>
      </div>
    </div>
    <div class="row">
      <div class="input-field col s12">
        <textarea id="description" name="description" class="materialize-textarea"><%= product.description %></textarea>
        <label class="active" for="description">Description</label>
      </div>
    </div>
    <div class="row">
      <div class="input-field col s12">
        <input type="number" step="0.01" id="price" name="price" value="<%= product.price %>" required>
        <label class="active" for="price">Price</label>
      </div>
    </div>
    <div class="row">
      <div class="file-field input-field col s12">
        <div class="btn">
          <span>Upload New Image</span>
          <input type="file" id="image" name="image" accept="image/*">
        </div>
        <div class="file-path-wrapper">
          <input class="file-path validate" type="text" placeholder="Upload product image">
        </div>
      </div>
    </div>
    <% if (product.image_url) { %>
      <div class="row">
        <div class="col s12">
          <img src="<%= product.image_url %>" alt="<%= product.product_name %>" style="width: 200px; height: auto; margin-top: 10px;">
        </div>
      </div>
    <% } %>
    <input type="hidden" name="existingImageUrl" value="<%= product.image_url %>">
    <div class="row">
      <div class="col s12">
        <button class="btn waves-effect waves-light" type="submit">Save Changes</button>
      </div>
    </div>
  </form>
</div>

<!-- <h2>Edit Product</h2>
<form action="/business/products/edit/<%= product.product_id %>" method="POST">
  <label for="categoryId">Category</label>
  <select name="categoryId" id="categoryId" required style="display: block; visibility: visible;">
    <% categories.forEach(category => { %>
      <option value="<%= category.category_id %>" <%= category.category_id === product.category_id ? 'selected' : '' %> >
        <%= category.category_name %>
      </option>
    <% }) %>
  </select>

  <label for="productName">Product Name</label>
  <input type="text" id="productName" name="productName" value="<%= product.product_name %>" required>

  <label for="description">Description</label>
  <textarea id="description" name="description"><%= product.description %></textarea>

  <label for="price">Price</label>
  <input type="number" step="0.01" id="price" name="price" value="<%= product.price %>" required>

  <label for="imageUrl">Image URL</label>
  <input type="text" id="imageUrl" name="imageUrl" value="<%= product.image_url %>">

  <button type="submit">Save Changes</button>
</form>
 -->
<!-- 
 <h2>Edit Product</h2>
<form action="/business/products/edit/<%= product.product_id %>" method="POST" enctype="multipart/form-data">
  <label for="categoryId">Category</label>
  <select name="categoryId" id="categoryId" required style="display: block; visibility: visible;">
    <% categories.forEach(category => { %>
      <option value="<%= category.category_id %>" <%= category.category_id === product.category_id ? 'selected' : '' %>>
        <%= category.category_name %>
      </option>
    <% }) %>
  </select>

  <label for="productName">Product Name</label>
  <input type="text" id="productName" name="productName" value="<%= product.product_name %>" required>
  
  <label for="description">Description</label>
  <textarea id="description" name="description"><%= product.description %></textarea>
  
  <label for="price">Price</label>
  <input type="number" step="0.01" id="price" name="price" value="<%= product.price %>" required>
  
  <label for="image">Upload New Image</label>
  <input type="file" id="image" name="image" accept="image/*">
  
  <input type="hidden" name="existingImageUrl" value="<%= product.image_url %>">
  <% if (product.image_url) { %>
    <img src="<%= product.image_url %>" alt="<%= product.product_name %>" style="width: 100px; height: auto;">
  <% } %>
  
  <button type="submit">Save Changes</button>
</form>
 -->