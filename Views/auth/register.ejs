<div class="container">
  <h3 class="center-align">Register</h3>

  <form id="registrationForm" action="/auth/register" method="POST">
    <!-- Role Selection -->
    <div class="row">
      <div class="col s12">
        <p>Register as:</p>
        <label>
          <input type="radio" name="role" value="customer" checked onchange="toggleBusinessFields(false)" />
          <span>Customer</span>
        </label>
        <label style="margin-left: 20px;">
          <input type="radio" name="role" value="business" onchange="toggleBusinessFields(true)" />
          <span>Business</span>
        </label>
      </div>
    </div>

    <!-- Common Fields -->
    <div class="input-field">
      <input id="username" name="username" type="text" required />
      <label for="username">Username</label>
    </div>
    <div class="input-field">
      <input id="email" name="email" type="email" required />
      <label for="email">Email</label>
    </div>
    <div class="input-field">
      <input id="password" name="password" type="password" required />
      <label for="password">Password</label>
    </div>

    <!-- Business-Specific Fields -->
    <div id="businessFields" style="display: none;">
      <div class="input-field">
        <input id="business_name" name="business_name" type="text" />
        <label for="business_name">Business Name</label>
      </div>
      <div class="input-field">
        <textarea id="description" name="description" class="materialize-textarea"></textarea>
        <label for="description">Business Description</label>
      </div>
      <div class="input-field">
        <select id="category_id" name="category_id">
          <option value="" disabled selected>Select a category</option>
          <% businessCategories.forEach(category => { %>
            <option value="<%= category.category_id %>"><%= category.category_name %></option>
          <% }) %>
        </select>
        <label for="category_id">Business Category</label>
      </div>
    </div>

    <!-- Submit Button -->
    <div class="center-align">
      <button type="submit" class="btn waves-effect waves-light">Register</button>
    </div>
  </form>
</div>

<script>
  // Toggle visibility of business-specific fields
  function toggleBusinessFields(show) {
    const businessFields = document.getElementById('businessFields');
    if (show) {
      businessFields.style.display = 'block';
    } else {
      businessFields.style.display = 'none';
    }
  }

  document.addEventListener('DOMContentLoaded', function () {
    const elems = document.querySelectorAll('select');
    M.FormSelect.init(elems);
  });
</script>

<!-- 
<div class="container">
  <h3>Register</h3>
  <form action="/auth/register" method="POST">
    <div class="input-field">
      <label for="username">Username</label>
      <input type="text" name="username" required>
    </div>

    <div class="input-field">
      <label for="email">Email</label>
      <input type="email" name="email" required>
    </div>

    <div class="input-field">
      <label for="password">Password</label>
      <input type="password" name="password" required>
    </div>

    Hidden field to assign default role (e.g., Customer)
    <input type="hidden" name="roleId" value="1">

    <button type="submit" class="btn">Register</button>
  </form>
</div>
 -->